<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>MP3 Player in A-Frame</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Камера с контроллерами движения и курсором -->
      <a-entity camera position="0 1.6 0" wasd-controls look-controls>
        <a-cursor></a-cursor>
      </a-entity>
      
      <!-- Основная структура плеера -->
      <a-box position="0 0.8 -3" width="3" height="1" depth="0.3" color="#333" id="player-body"></a-box>

      <!-- Диски на передней панели -->
      <a-cylinder position="-0.75 0.8 -2.82" radius="0.25" height="0.1" color="#888" rotation="90 0 0" id="disk1"></a-cylinder>
      <a-cylinder position="0.75 0.8 -2.82" radius="0.25" height="0.1" color="#888" rotation="90 0 0" id="disk2"></a-cylinder>
      
      <!-- Кнопки MP3-плеера -->
      <a-box position="-1 1.25 -2.95" width="0.5" height="0.5" depth="0.1" color="#FF0000" class="button" id="button1"></a-box>
      <a-box position="-0.5 1.25 -2.95" width="0.5" height="0.5" depth="0.1" color="#00FF00" class="button" id="button2"></a-box>
      <a-box position="0 1.25 -2.95" width="0.5" height="0.5" depth="0.1" color="#0000FF" class="button" id="button3"></a-box>
      <a-box position="0.5 1.25 -2.95" width="0.5" height="0.5" depth="0.1" color="#FFFF00" class="button" id="button4"></a-box>
      <a-box position="1 1.25 -2.95" width="0.5" height="0.5" depth="0.1" color="#FF00FF" class="button" id="button5"></a-box>
      <a-box position="0 0.6 -2.82" width="0.8" height="0.3" depth="0.1" color="#FF0000" class="button" id="stop-button"></a-box>
      
      <!-- Текст на кнопках -->
      <a-text position="-1 1.4 -2.9" value="1" align="center" width="2"></a-text>
      <a-text position="-0.5 1.4 -2.9" value="2" align="center" width="2"></a-text>
      <a-text position="0 1.4 -2.9" value="3" align="center" width="2"></a-text>
      <a-text position="0.5 1.4 -2.9" value="4" align="center" width="2"></a-text>
      <a-text position="1 1.4 -2.9" value="5" align="center" width="2"></a-text>
      <a-text position="0 0.65 -2.87" value="Stop" align="center" width="4" color="#000"></a-text>
      
      <!-- Звуковые файлы -->
      <a-sound src="url(songs/1.mp3)" id="song1"></a-sound>
      <a-sound src="url(songs/2.mp3)" id="song2"></a-sound>
      <a-sound src="url(songs/3.mp3)" id="song3"></a-sound>
      <a-sound src="url(songs/4.mp3)" id="song4"></a-sound>
      <a-sound src="url(songs/5.mp3)" id="song5"></a-sound>
      
      <!-- Скрипт для управления MP3-плеером -->
      <script>
        AFRAME.registerComponent('mp3-player', {
          init: function () {
            const songs = {
              'button1': '#song1',
              'button2': '#song2',
              'button3': '#song3',
              'button4': '#song4',
              'button5': '#song5'
            };

            const disk1 = document.querySelector('#disk1');
            const disk2 = document.querySelector('#disk2');

            Object.keys(songs).forEach(button => {
              const buttonEl = document.querySelector(`#${button}`);
              buttonEl.addEventListener('click', () => {
                // Остановить все песни
                Object.values(songs).forEach(song => {
                  document.querySelector(song).components.sound.stopSound();
                });
                // Остановить вращение дисков
                disk1.removeAttribute('animation');
                disk2.removeAttribute('animation');
                
                // Воспроизвести выбранную песню
                document.querySelector(songs[button]).components.sound.playSound();
                
                // Вращение дисков при воспроизведении
                disk1.setAttribute('animation', 'property: rotation; to: 0 0 -360; loop: true; dur: 2000; easing: linear');
                disk2.setAttribute('animation', 'property: rotation; to: 0 0 -360; loop: true; dur: 2000; easing: linear');
              });
              buttonEl.addEventListener('mousedown', () => {
                buttonEl.setAttribute('position', { x: buttonEl.getAttribute('position').x, y: 1.15, z: buttonEl.getAttribute('position').z });
              });
              buttonEl.addEventListener('mouseup', () => {
                buttonEl.setAttribute('position', { x: buttonEl.getAttribute('position').x, y: 1.25, z: buttonEl.getAttribute('position').z });
              });
            });

            // Кнопка остановки
            const stopButtonEl = document.querySelector('#stop-button');
            stopButtonEl.addEventListener('click', () => {
              Object.values(songs).forEach(song => {
                document.querySelector(song).components.sound.stopSound();
              });
              // Остановить вращение дисков
              disk1.removeAttribute('animation');
              disk2.removeAttribute('animation');
            });
            stopButtonEl.addEventListener('mousedown', () => {
              stopButtonEl.setAttribute('position', { x: stopButtonEl.getAttribute('position').x, y: 0.5, z: stopButtonEl.getAttribute('position').z });
            });
            stopButtonEl.addEventListener('mouseup', () => {
              stopButtonEl.setAttribute('position', { x: stopButtonEl.getAttribute('position').x, y: 0.6, z: stopButtonEl.getAttribute('position').z });
            });
          }
        });

        document.querySelector('a-scene').setAttribute('mp3-player', '');
      </script>
    </a-scene>
  </body>
</html>
